<% unless @posts.nil? %>
  <% @posts.each do |post| %>
    <div class="well">
        <div class="media">
          <a class="pull-left" href="#">
              <!-- TODO: fix default image for post. -->
              <% if post.attachments.any? %>
                <%= image_tag(attachment_path(post.attachments.first.id),
                  class: "img-responsive", size: "300x300") %>
              <% else %>
                <%= image_tag(attachment_path("noimage"),
                  class: "img-responsive", size: "300x300") %>
              <% end %>
          </a>
        <div class="media-body">
          <h4 class="media-heading"><%= post.title %></h4>
            <p class="text-right"><%= post.id %></p>
            <p><%= sanitize post.content[0..300] %>...</p>
            <ul class="list-inline list-unstyled">
              <% if current_user.present? && (can? :update, Post) %>
                <li>
                  <span>
                    <i class="glyphicon glyphicon-pencil"></i>
                    <%= link_to "Edit", edit_post_path(post), remote: true, class: "btn btn-link" %>
                  </span>
                </li>
              <% end %>
              <% if current_user.present? && (can? :destroy, Post) %>
                <li>|</li>
                <span>
                  <i class="glyphicon glyphicon-trash"></i>
                  <%= link_to "Delete", post, remote: true, method: :delete, data: {confirm: "Are you sure?"}, class: "btn btn-link" %>
                </span>
              <% end %>
            </ul>
         </div>
      </div>
    </div>
  <% end %>
<% else %>
  <p>There are no posts..</p>
<% end %>
